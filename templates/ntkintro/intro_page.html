{% extends 'base.html' %}
{% block content %}

<div class="container mt-4">
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h2 class="card-title">{{ intro.title }}</h2>

      {% if intro.logo %}
        <img src="{{ intro.logo.url }}" class="img-fluid my-3" alt="NTK 로고">
      {% endif %}

      <p class="card-text">{{ intro.description|linebreaks }}</p>
      <p class="text-muted small">
        버전: {{ intro.current_version }} | 등록일: {{ intro.created_at|date:"Y.m.d H:i" }}
      </p>

      {% if intro.version_history.all %}
        <h5 class="mt-4">📌 버전 히스토리</h5>
        <ul class="list-group mb-4">
          {% for v in intro.version_history.all %}
            <li class="list-group-item">
              <strong>{{ v.version }}</strong> - {{ v.updated_at|date:"Y.m.d H:i" }}<br>
              <small class="text-muted">{{ v.changes|linebreaks }}</small>
            </li>
          {% endfor %}
        </ul>
      {% endif %}


      <!-- 최근 툴 등록 히스토리 -->
      <h5 class="mt-4">🛠️ 툴 등록 히스토리</h5>
      <ul class="list-group">
        {% for h in tool_histories %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              {{ h.created_at|date:"Y.m.d H:i" }} —
              <a href="{% url 'toolhub:tool_detail' h.tool.pk %}">{{ h.tool.name }}</a>
              {% if h.user %}(by {{ h.user.username }}){% endif %}
            </div>
          </li>
        {% empty %}
          <li class="list-group-item text-muted">등록된 툴이 없습니다.</li>
        {% endfor %}
      </ul>

    </div>
  </div>
</div>

{% endblock %}
