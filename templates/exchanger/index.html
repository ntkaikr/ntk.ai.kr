{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container py-5 text-center">
  <h2 class="mb-4">
    <i class="bi bi-currency-exchange"></i> 환율 계산기
  </h2>

  <form method="get" class="row justify-content-center g-2 mb-4">
    <div class="col-auto">
      <input type="number" name="amount" step="0.01" min="0" class="form-control" placeholder="금액 입력" required value="{{ request.GET.amount }}">
    </div>
    <div class="col-auto">
      <select name="from_currency" class="form-select">
        {% for curr in currencies %}
        <option value="{{ curr }}" {% if request.GET.from_currency == curr or (not request.GET.from_currency and curr == 'USD') %}selected{% endif %}>{{ curr }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-auto">→</div>
    <div class="col-auto">
      <select name="to_currency" class="form-select">
        {% for curr in currencies %}
        <option value="{{ curr }}" {% if request.GET.to_currency == curr or (not request.GET.to_currency and curr == 'KRW') %}selected{% endif %}>{{ curr }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-auto">
      <button type="submit" class="btn btn-primary">
        <i class="bi bi-cash-coin"></i> 계산
      </button>
    </div>
  </form>

  {% if result %}
  <div class="alert alert-success d-inline-block text-start">
    <p class="mb-1">
      <strong>{{ result.amount }} {{ result.from }}</strong> →
      <strong>{{ result.converted }}</strong> {{ result.to }}
    </p>
    <p class="mb-1 text-muted">
      환율: 1 {{ result.from }} = <strong>{{ result.rate }}</strong> {{ result.to }}
    </p>
    <p class="mb-0 text-muted">기준일: {{ result.date }}</p>
  </div>
  {% elif error %}
  <div class="alert alert-danger">{{ error }}</div>
  {% endif %}
</div>
{% endblock %}
