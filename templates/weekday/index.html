{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <h1 class="h3 mb-3">요일 계산기</h1>

  <div class="card shadow-sm">
    <div class="card-body">
      <form method="get" class="row gy-2 gx-3 align-items-end">
        <div class="col-sm-6 col-md-4">
          <label class="form-label" for="id_date">{{ form.date.label }}</label>
          {{ form.date }}
        </div>
        <div class="col-auto">
          <button class="btn btn-primary" type="submit">요일 확인</button>
        </div>
        <div class="col-auto">
          <a class="btn btn-outline-secondary" href="?date={{ today }}">오늘로</a>
        </div>
        <div class="col-auto">
          <button id="copyLinkBtn" class="btn btn-outline-dark" type="button">공유 링크 복사</button>
        </div>
      </form>

      {% if result %}
      <hr>
      <div class="mt-3">
        <div class="fs-5">결과</div>
        <div class="display-6 fw-semibold">{{ result }}</div>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}

{% block script %}
<script>
  document.getElementById("copyLinkBtn")?.addEventListener("click", async () => {
    try {
      await navigator.clipboard.writeText(window.location.href);
      alert("현재 링크가 복사되었습니다!");
    } catch(e) {
      alert("복사에 실패했습니다. 주소창의 링크를 직접 복사해주세요.");
    }
  });
</script>
{% endblock %}
