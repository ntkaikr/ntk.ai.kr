{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <h1 class="h3 mb-3 d-flex align-items-center gap-2">
    <!-- 달력 아이콘 -->
    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-calendar-check text-primary" viewBox="0 0 16 16">
      <path d="M10.854 7.146a.5.5 0 0 1 0 .708l-3.5 3.5a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 10.293l3.146-3.147a.5.5 0 0 1 .708 0"/>
      <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 0-.5.5V4h12v-.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 1 0-1h1A1.5 1.5 0 0 1 15 3.5V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2zM15 5H1v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1z"/>
    </svg>
    요일 계산기
  </h1>

  <div class="card shadow-sm">
    <div class="card-body">
      <form method="get" class="row gy-2 gx-3 align-items-end">
        <div class="col-sm-6 col-md-4">
          <label class="form-label" for="id_date">{{ form.date.label }}</label>
          <div class="input-group">
            <span class="input-group-text">
              <!-- 달력 아이콘 -->
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-calendar" viewBox="0 0 16 16">
                <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
              </svg>
            </span>
            {{ form.date }}
          </div>
        </div>
        <div class="col-auto">
          <button class="btn btn-primary" type="submit">
            <!-- 체크 아이콘 -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check2-circle me-1" viewBox="0 0 16 16">
              <path d="M2.5 8a5.5 5.5 0 1 1 11 0 5.5 5.5 0 0 1-11 0m11 0A5.5 5.5 0 1 0 2.5 8a5.5 5.5 0 0 0 11 0"/>
              <path d="M10.97 6.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 9.384a.75.75 0 0 1 1.06-1.06l2.094 2.093z"/>
            </svg>
            요일 확인
          </button>
        </div>
        <div class="col-auto">
          <a class="btn btn-outline-secondary" href="?date={{ today }}">
            <!-- 오늘 아이콘 -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-repeat me-1" viewBox="0 0 16 16">
              <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-7.068 2H.534a.25.25 0 0 1-.192-.41l1.966-2.36a.25.25 0 0 1 .384 0l1.966 2.36a.25.25 0 0 1-.192.41"/>
              <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.77-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3m0 10c1.552 0 2.94-.707 3.857-1.818a.5.5 0 1 1 .77.636A6.002 6.002 0 0 1 2.083 9H3.1A5.002 5.002 0 0 0 8 13"/>
            </svg>
            오늘로
          </a>
        </div>
        <div class="col-auto">
          <button id="copyLinkBtn" class="btn btn-outline-dark" type="button">
            <!-- 링크 아이콘 -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg me-1" viewBox="0 0 16 16">
              <path d="M4.715 6.542a3 3 0 0 1 4.243 0l.707.707a.5.5 0 0 0 .707-.707l-.707-.707a4 4 0 0 0-5.657 0l-2.122 2.121a4 4 0 0 0 0 5.657l.707.707a.5.5 0 0 0 .707-.707l-.707-.707a3 3 0 0 1 0-4.243z"/>
              <path d="M6.542 11.285a3 3 0 0 1 0-4.243l.707-.707a.5.5 0 0 0-.707-.707l-.707.707a4 4 0 0 0 0 5.657l2.121 2.122a4 4 0 0 0 5.657 0l.707-.707a.5.5 0 0 0-.707-.707l-.707.707a3 3 0 0 1-4.243 0z"/>
            </svg>
            공유 링크
          </button>
        </div>
      </form>

      {% if result %}
      <hr>
      <div class="mt-3">
        <div class="fs-5">결과</div>
        <div class="display-6 fw-semibold">{{ result }}</div>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}

{% block script %}
<script>
  document.getElementById("copyLinkBtn")?.addEventListener("click", async () => {
    try {
      await navigator.clipboard.writeText(window.location.href);
      alert("현재 링크가 복사되었습니다!");
    } catch(e) {
      alert("복사에 실패했습니다. 주소창의 링크를 직접 복사해주세요.");
    }
  });
</script>
{% endblock %}
