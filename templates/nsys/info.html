{% extends 'base.html' %}
{% block title %}ì„œë²„ ëª¨ë‹ˆí„°ë§ | Nsys{% endblock %}
{% block content %}
<div class="container">
  <h2 class="mt-4">ğŸ–¥ï¸ ì„œë²„ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§</h2>

  <div class="row gx-4">
    <!-- ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ -->
    <div class="col-lg-6 mb-4">
      <div class="card shadow">
        <div class="card-header">ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰</div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item"><strong>CPU ì „ì²´:</strong> {{ cpu_percent }}%</li>
          <li class="list-group-item">
            <strong>ì½”ì–´ë³„ CPU:</strong>
            {% for pct in cpu_per_core %}
              Core{{ forloop.counter }}: {{ pct }}%{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </li>
          <li class="list-group-item">
            <strong>ë©”ëª¨ë¦¬:</strong> {{ used_mem|filesizeformat }} / {{ total_mem|filesizeformat }} ({{ mem_percent }}%)
          </li>
          <li class="list-group-item">
            <strong>ë””ìŠ¤í¬:</strong> {{ used_disk|filesizeformat }} / {{ total_disk|filesizeformat }} ({{ disk_percent }}%)
          </li>
        </ul>
      </div>
    </div>

    <!-- í™˜ê²½ ì •ë³´ -->
    <div class="col-lg-6 mb-4">
      <div class="card shadow">
        <div class="card-header">í™˜ê²½ ì •ë³´</div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item"><strong>OS:</strong> {{ os_name }} {{ os_version }}</li>
          <li class="list-group-item"><strong>í˜¸ìŠ¤íŠ¸ëª…:</strong> {{ hostname }}</li>
          <li class="list-group-item"><strong>ë‚´ë¶€ IP:</strong> {{ internal_ip }}</li>
          <li class="list-group-item"><strong>ê°€ë™ ì‹œê°„:</strong> {{ uptime }}</li>
          <li class="list-group-item"><strong>í”„ë¡œì„¸ìŠ¤ ìˆ˜:</strong> {{ proc_count }}</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ & íŠ¸ë˜í”½ -->
  <div class="card mb-4 shadow">
    <div class="card-header">ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ &amp; íŠ¸ë˜í”½</div>
    <div class="card-body">
      {% for iface, addrs in net_addrs.items %}
        <h5 class="mt-3">{{ iface }}</h5>
        <ul class="list-group mb-2">
          {% for addr in addrs %}
            <li class="list-group-item">
              {% if addr.family == addr.family.AF_INET %}
                <strong>IPv4 ì£¼ì†Œ:</strong> {{ addr.address }}
              {% elif addr.family == addr.family.AF_INET6 %}
                <strong>IPv6 ì£¼ì†Œ:</strong> {{ addr.address }}
              {% elif addr.family == addr.family.AF_LINK %}
                <strong>MAC ì£¼ì†Œ:</strong> {{ addr.address }}
              {% else %}
                <strong>{{ addr.family }}:</strong> {{ addr.address }}
              {% endif %}
            </li>
          {% endfor %}
        </ul>
        {% with stats=net_io|get_item:iface %}
          {% if stats %}
            <ul class="list-group mb-3">
              <li class="list-group-item"><strong>ì†¡ì‹  ë°”ì´íŠ¸:</strong> {{ stats.bytes_sent|filesizeformat }}</li>
              <li class="list-group-item"><strong>ìˆ˜ì‹  ë°”ì´íŠ¸:</strong> {{ stats.bytes_recv|filesizeformat }}</li>
              <li class="list-group-item"><strong>ì†¡ì‹  íŒ¨í‚·:</strong> {{ stats.packets_sent }}</li>
              <li class="list-group-item"><strong>ìˆ˜ì‹  íŒ¨í‚·:</strong> {{ stats.packets_recv }}</li>
            </ul>
          {% endif %}
        {% endwith %}
      {% endfor %}
    </div>
  </div>

  <!-- ë¡œë“œ ì• ë²„ë¦¬ì§€ -->
  {% if load1 %}
  <div class="card mb-4 shadow">
    <div class="card-header">ë¡œë“œ í‰ê·  (1/5/15ë¶„)</div>
    <div class="card-body">
      {{ load1 }}, {{ load5 }}, {{ load15 }}
    </div>
  </div>
  {% endif %}

  <!-- íŒŒí‹°ì…˜ë³„ ì‚¬ìš©ëŸ‰ -->
  <div class="card mb-4 shadow">
    <div class="card-header">íŒŒí‹°ì…˜ë³„ ì‚¬ìš©ëŸ‰</div>
    <ul class="list-group list-group-flush">
      {% for p in partitions %}
        <li class="list-group-item">
          <strong>ë§ˆìš´íŠ¸ ì§€ì :</strong> {{ p.mount }}<br>
          <strong>ì‚¬ìš©ëŸ‰:</strong> {{ p.used|filesizeformat }} / {{ p.total|filesizeformat }}<br>
          <strong>ì‚¬ìš©ë¥ :</strong> {{ p.percent }}%
        </li>
      {% endfor %}
    </ul>
  </div>

  <!-- ì£¼ìš” í™˜ê²½ ë³€ìˆ˜ -->
  <div class="card mb-4 shadow">
    <div class="card-header">ì£¼ìš” í™˜ê²½ ë³€ìˆ˜</div>
    <ul class="list-group list-group-flush">
      {% for key, val in env_vars.items %}
        <li class="list-group-item"><strong>{{ key }}:</strong> {{ val }}</li>
      {% endfor %}
    </ul>
  </div>

</div>
{% endblock %}
