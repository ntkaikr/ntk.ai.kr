{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <div class="d-flex align-items-center gap-2 mb-3">
    <h1 class="h4 mb-0">데일리 라이프 퀘스천</h1>
    <span class="badge text-bg-secondary">미취학 아동</span>
  </div>

  <div class="mb-3">
    <form method="get" class="d-flex align-items-center gap-2">
      <label class="form-label mb-0">카테고리</label>
      <select class="form-select w-auto" name="category" onchange="this.form.submit()">
        <option value="" {% if not category %}selected{% endif %}>전체</option>
        <option value="daily" {% if category == 'daily' %}selected{% endif %}>일상</option>
        <option value="emotion" {% if category == 'emotion' %}selected{% endif %}>감정</option>
        <option value="social" {% if category == 'social' %}selected{% endif %}>관계/사회성</option>
        <option value="imagine" {% if category == 'imagine' %}selected{% endif %}>상상</option>
        <option value="choice" {% if category == 'choice' %}selected{% endif %}>선택</option>
      </select>
      {% if category %}
        <a class="btn btn-outline-secondary btn-sm" href="{% url 'dailyq_index' %}">초기화</a>
      {% endif %}
    </form>
  </div>

  <div class="card shadow-sm border-0">
    <div class="card-body">
      <div class="d-flex align-items-center justify-content-between">
        <h5 class="card-title mb-1">오늘의 질문 <span class="text-secondary fs-6">({{ today|date:"Y-m-d" }})</span></h5>
        <span class="text-muted small">
          권장연령 {{ question.min_age }}–{{ question.max_age }}세 · 난이도 {{ question.difficulty }}
        </span>
      </div>
      <p class="fs-5 my-3">{{ question.text }}</p>

      <form method="post" class="mt-3">
        {% csrf_token %}
        <div class="row g-3">
          <div class="col-sm-4">
            <label class="form-label">아이 이름(선택)</label>
            {{ form.child_name }}
          </div>
          <div class="col-12">
            <label class="form-label">아이의 대답 / 관찰</label>
            {{ form.answer_text }}
          </div>
        </div>

        <div class="d-flex align-items-center gap-2 mt-3">
          <button class="btn btn-primary" type="submit">
            {% if has_existing %}수정하기{% else %}기록하기{% endif %}
          </button>
          <a class="btn btn-outline-secondary" href="{% url 'dailyq_history' %}">내 기록 보기</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
