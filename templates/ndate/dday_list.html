{% extends 'base.html' %}
{% block title %}D-Day ê´€ë¦¬ | Ndate{% endblock %}
{% block content %}
<div class="container">
  <h2 class="mt-4">ğŸ“… D-Day ê´€ë¦¬</h2>

  <!-- ì¶”ê°€ í¼ -->
  <div class="card mb-4 mx-auto" style="max-width:480px;">
    <div class="card-body">
      <form method="post">
        {% csrf_token %}
        <div class="row g-2 align-items-center">
          <div class="col-5">
            <div class="form-floating">
              {{ form.target_date }}
              <label for="{{ form.target_date.id_for_label }}">ë‚ ì§œ</label>
            </div>
          </div>
          <div class="col-5">
            <div class="form-floating">
              {{ form.title }}
              <label for="{{ form.title.id_for_label }}">ì œëª©/ì„¤ëª…</label>
            </div>
          </div>
          <div class="col-2 d-grid">
            <button class="btn btn-primary">ì¶”ê°€</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- ë“±ë¡ëœ D-Day ë¦¬ìŠ¤íŠ¸ -->
  {% if items %}
    <ul class="list-group mx-auto" style="max-width:480px;">
      {% for item in items %}
        {% with diff=item.days_diff %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ item.title }}</strong><br>
            {{ item.target_date }} â†’
            {% if diff > 0 %}
              <span class="text-danger">ğŸ—“ D-{{ diff }}</span>
            {% elif diff < 0 %}
              <span class="text-secondary">âŒ› +{{ diff|abs }}</span>
            {% else %}
              <span class="text-success">ğŸ‰ D-Day!</span>
            {% endif %}
          </div>
          <form method="post" action="{% url 'ndate:dday_delete' item.pk %}">
            {% csrf_token %}
            <button class="btn btn-sm btn-outline-danger">ì‚­ì œ</button>
          </form>
        </li>
        {% endwith %}
      {% endfor %}
    </ul>
  {% else %}
    <div class="alert alert-warning text-center">
      ë“±ë¡ëœ D-Dayê°€ ì—†ìŠµë‹ˆë‹¤.
    </div>
  {% endif %}
</div>
{% endblock %}
